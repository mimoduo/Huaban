function captureSurface(event){px=event.pageX,py=event.pageY,shape[pencilNumber].push(px,py),pencil[pencilNumber].attr({points:shape[pencilNumber]})}function touchSurface(event){shape.push([]),pencil.push([]),pencil[pencilNumber]=huaban.polyline().attr({fill:"transparent",stroke:"#000"}),captureSurface(event)}function drawSurface(event){0!=event.buttons&&captureSurface(event)}function leaveSurface(event){pencilNumber++}function showMessage(action){messageText.innerHTML=action,message.classList.add("show-message"),setTimeout(function(){message.classList.remove("show-message")},2e3)}function resetSurface(){0!=pencilNumber?(huaban.clear(),shape=[],pencil=[],pencilNumber=0,showMessage("The entire huaban has been reset")):showMessage("There is nothing to reset")}function undo(){pencilNumber>=1?(pencilNumber--,pencil[pencilNumber].remove(),shape.pop(),pencil.pop(),showMessage("The last drawn shape has been removed")):showMessage("There are no shapes to remove")}var huaban=Snap(".huaban"),surface=document.querySelector(".huaban"),huabanOptions=document.querySelectorAll(".huaban-options li"),message=document.querySelector(".huaban-message"),messageText=document.querySelector(".huaban-message span");surface.addEventListener("mousedown",touchSurface,!1),surface.addEventListener("mousemove",drawSurface,!1),surface.addEventListener("mouseup",leaveSurface,!1),huabanOptions[0].addEventListener("click",resetSurface,!1),huabanOptions[1].addEventListener("click",undo,!1);var px=0,py=0,shape=[],pencil=[],pencilNumber=0;