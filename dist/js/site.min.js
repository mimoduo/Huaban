function captureSurface(event){px=event.pageX,py=event.pageY,shape[pencilNumber].push(px,py),pencil[pencilNumber].attr({points:shape[pencilNumber]})}function touchSurface(event){shape.push([]),pencil.push([]),pencil[pencilNumber]=huaban.polyline().attr({fill:"rgba("+fillRedSetting.value+", "+fillGreenSetting.value+", "+fillBlueSetting.value+", "+fillOpacitySetting.value+")",stroke:"rgb("+strokeRedSetting.value+", "+strokeGreenSetting.value+", "+strokeBlueSetting.value+")",strokeWidth:strokeWidthSetting.value,strokeLinecap:strokeLinecapSetting.value,strokeLinejoin:strokeLinejoinSetting.value}),captureSurface(event)}function drawSurface(event){0!=event.buttons&&captureSurface(event)}function leaveSurface(event){pencilNumber++}function showMessage(action){messageText.innerHTML=action,message.classList.add("show-message"),setTimeout(function(){message.classList.remove("show-message")},2e3)}function resetSurface(){0!=pencilNumber?(huaban.clear(),shape=[],pencil=[],pencilNumber=0,showMessage("The entire huaban has been reset")):showMessage("There is nothing to reset")}function undo(){pencilNumber>=1?(pencilNumber--,pencil[pencilNumber].remove(),shape.pop(),pencil.pop(),showMessage("The last drawn shape has been removed")):showMessage("There are no shapes to remove")}function settings(selected){""!=selectedSetting&&selectedSetting.classList.remove("selected-setting"),selectedSetting=document.querySelector(selected),settings.classList.add("show-settings"),selectedSetting.classList.add("selected-setting")}function closeSettings(){settings.classList.remove("show-settings"),selectedSetting.classList.remove("selected-setting")}var huaban=Snap(".huaban"),surface=document.querySelector(".huaban");surface.addEventListener("mousedown",touchSurface,!1),surface.addEventListener("mousemove",drawSurface,!1),surface.addEventListener("mouseup",leaveSurface,!1);var menu=document.querySelectorAll(".huaban-menu li");menu[0].addEventListener("click",resetSurface,!1),menu[1].addEventListener("click",undo,!1),menu[2].addEventListener("click",settings.bind(null,".stroke-setting"),!1),menu[3].addEventListener("click",settings.bind(null,".fill-setting"),!1);var settings=document.querySelector(".huaban-settings"),settingsClose=document.querySelector(".huaban-settings-close"),selectedSetting=null;settingsClose.addEventListener("click",closeSettings,!1);var strokeRedSetting=document.querySelector(".stroke-red"),strokeGreenSetting=document.querySelector(".stroke-green"),strokeBlueSetting=document.querySelector(".stroke-blue"),strokeWidthSetting=document.querySelector(".stroke-width"),strokeLinecapSetting=document.querySelector(".stroke-line-cap"),strokeLinejoinSetting=document.querySelector(".stroke-line-join"),fillRedSetting=document.querySelector(".fill-red"),fillGreenSetting=document.querySelector(".fill-green"),fillBlueSetting=document.querySelector(".fill-blue"),fillOpacitySetting=document.querySelector(".fill-opacity"),message=document.querySelector(".huaban-message"),messageText=document.querySelector(".huaban-message span"),px=0,py=0,shape=[],pencil=[],pencilNumber=0;